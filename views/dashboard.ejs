<div
  class="container-fluid container-fluid-custom pt-3 pb-5 mb-5"
  style="min-height: 70vh; display: flex; flex-direction: column"
>
  <div class="row mb-4">
    <div class="col">
      <h1>Hello, <%= username %>!</h1>
    </div>
    <div class="col text-end">
      <div class="sortButton btn btn-info">  Sort  </div>
      <a href="/dashboard/note/add" class="newNoteButton btn btn-primary">+ New Note</a>
    </div>
  </div>

  <!-- Notes Container -->
  <div class="row">
    <% if (notes.length > 0) { %>
      <% notes.forEach(note => { %>
        <div class="col-md-4 mb-3">
          <div class="card" style="height: 300px;">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title"><%= note.title %></h5>
              <p class="card-text"><%- note.body %></p>
            </div>
            <div class="card-footer">
              <form action="POST" action="">
                <i class="trashButton fa-solid fa-trash" data-id="<%= note._id %>" data-bs-toggle="modal" data-bs-target="#deleteModal"></i>
              </form>
              <a href="/dashboard/notes/<%= note._id %>" class="btn btn-info">View</a>
            </div>
          </div>
        </div>
      <% }) %>
    <% } else { %>
      <div class="col ps-5">
        <p>No Notes found. <a href="/dashboard/note/add">Create one now!</a></p>
      </div>
    <% } %>
  </div>
</div>


  <!-- paginatoin  -->
  <nav aria-label="Page navigation" class="mt-auto">
    <ul class="pagination pagination-lg justify-content-center">
      <!-- Previous button -->
      <% if (current > 1) { %>
      <li class="page-item">
        <a class="page-link" href="?page=<%= current - 1 %>">Previous</a>
      </li>
      <% } else { %>
      <li class="page-item disabled">
        <a class="page-link">Previous</a>
      </li>
      <% } %>

      <!-- Page numbers -->
      <% for (let i = 1; i <= totalPages; i++) { %> <% if (i === current) { %>
      <li class="page-item active">
        <span class="page-link"><%= i %></span>
      </li>
      <% } else { %>
      <li class="page-item">
        <a class="page-link" href="?page=<%= i %>"><%= i %></a>
      </li>
      <% } %> <% } %>

      <!-- Next button -->
      <% if (current < totalPages) { %>
      <li class="page-item">
        <a class="page-link" href="?page=<%= current + 1 %>">Next</a>
      </li>
      <% } else { %>
      <li class="page-item disabled">
        <a class="page-link">Next</a>
      </li>
      <% } %>
    </ul>
  </nav>
</div>


<!-- Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Delete Note?</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Are you sure you want to delete this note? This action cannot be undone.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="deleteButton btn btn-danger" id="confirmDeleteButton">Delete</button>
      </div>
    </div>
  </div>
</div>
